<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="utf-8">
<title>Crea un escenario</title>
<link
	rel="stylesheet"
	href="https://use.fontawesome.com/releases/v5.2.0/css/all.css"
	integrity="sha384-hWVjflwFxL6sNzntih27bfxkr27PmbbK/iSvJ+a4+0owXq79v+lsFkW54bOGbiDQ"
	crossorigin="anonymous">
<link
	href="css/bulma.css"
	rel="stylesheet">
<script
	src="https://ajax.googleapis.com/ajax/libs/jquery/3.3.1/jquery.min.js"></script>
<script
	src="js/customjslib.js"
	type="text/javascript"></script>
<script
	type="text/javascript"
	src="js/jquery.validate.js"></script>
<script>
	$(document).ready(function() {
		$("#scenario_form").validate({
			rules : {
				name : {
					required : true,
					minlength : 2
				},
				description : {
					maxlength : 511
				},
				data : {
					required: true,
				}
			},
			messages : {
				name : {
					required : "Introduce un nombre v&aacute;lido para tu escenario",
					minlength : "Nombre debe tener al menos 2 caracteres",
					maxlength : "MÃ¡ximo 64 caracteres"
				},
				description : {
					maxlength : "M&aacute;ximo 511 caracteres",
				},
				data: {
					required : "Las reglas son obligatorias",
				}
			},
			errorPlacement : function(error, element) {
				error.insertAfter(element);
				error.addClass("help is-danger");
				element.addClass("is-danger")
			},
			highlight : function(element) {
				$(element).removeClass("is-danger");
			},
			unhighlight : function(element) {
				$(element).removeClass("is-danger");
			},
		});
	});
</script>
</head>
<body class="content">
	<header th:replace="fragments/session_header :: header"></header>
	<section
		class="section"
		th:if="${failname != null or faildesc != null or failfile != null}">
		<div class="container box is-danger">
			<h3 class="notification is-danger">Se han encontrado los siguientes errores:</h3>
			<ul>
				<li
					th:if="${failname}"
					th:text="${failname}"></li>
				<li
					th:if="${faildesc}"
					th:text="${faildesc}"></li>
				<li th:if="${failfile}">
					<ul th:each="error : ${failfile}">
						<li th:text="${error}"></li>
					</ul>
			</ul>
		</div>
	</section>
	<section class="section">
		<div class="container">
			<h3 class="subtitle is-3">Crear escenario</h3>
			<form
				class="form"
				action="#"
				id="scenario_form"
				th:action="@{/createScenarioSubmit}"
				method="post"
				enctype="multipart/form-data">
				<div class="field">
					<label
						for="name"
						class="label">Nombre</label>
					<div class="control">
						<input
							type="text"
							id="name"
							name="name"
							class="input"
							placeholder="Nombre del escenario"
							required
							autofocus
							maxlength="256"
							th:value="${name}">
					</div>
				</div>
				<div class="field">
					<label
						for="description"
						class="label">Etiquetas</label>
					<div class="control">
						<input
							type="text"
							id="description"
							name="description"
							class="input"
							placeholder="Etiquetas que ayuden a la b&uacute;squeda..."
							th:value="${description}">
					</div>
				</div>
				<div class="field">
					<label
						for="data"
						class="label">Reglas</label>
					<div class="control">
						<input
							type="file"
							id="data"
							name="data"
							class="input"
							accept=".csv"
							required>
					</div>
				</div>
				<div class="field">
					<div class="control">
						<input
							class="button is-primary is-medium is-fullwidth"
							type="submit"
							value="Crear Escenario">
					</div>
				</div>
			</form>
		</div>
	</section>
</body>
</html>